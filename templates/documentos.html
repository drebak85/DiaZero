<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gestor de Documentos</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Estilos propios -->
  <link rel="stylesheet" href="/static/css/documentos.css">

  <style>
    /* Tema oscuro suave sólo para esta página */
    body { background-color: #0f1115; color: #e5e7ef; margin: 0; }

    /* Tarjetas y estados (coinciden con tu estilo actual) */
    .form-section, .results-section {
      background: #171a21; padding: 1.5rem; border-radius: 0.75rem;
      margin-bottom: 2rem; border: 1px solid #242938;
    }
    .doc-item{ background:#131822; border:1px solid #242938; border-radius:12px; padding:12px; }
    .doc-item.soon{   background:#1f1a0f; border-color:#5b4f1f; }
    .doc-item.today{  background:#2b1a1a; border-color:#7a2a2a; }
    .doc-item.expired{background:#2a1717; border-color:#5b1f1f; }
    .exp-date{ margin-left:8px; font-weight:600; color:#facc15; }
    .exp-date.alert{ color:#f87171; }
  </style>
</head>

<body>
  <div class="docs-page"><!-- limita ancho y centra -->

    <!-- Login -->
    <div id="login" class="form-section">
      <h3>Acceso</h3>
      <input type="password" id="clave" placeholder="Introduce la contraseña" class="form-control my-2">
      <button class="btn btn-primary" onclick="verificarClave()">Entrar</button>
    </div>

    <!-- Formulario (oculto hasta validar) -->
    <div id="app" class="form-section d-none">
      <h3>Subir / Editar Documento</h3>
      <form id="formulario-documento">
        <div class="row g-2">
          <div class="col-6">
            <input class="form-control" type="text" id="nombre" placeholder="Nombre del documento" required>
          </div>

          <div class="col-6">
            <input class="form-control" type="file" id="archivo">
          </div>

          <div class="col-6">
            <label class="form-label">Tipo</label>
            <input class="form-control" list="tipos" id="tipo" placeholder="Tipo (p. ej. DNI, Renta…)" required>
            <datalist id="tipos"></datalist>
          </div>

          <div class="col-6">
            <label class="form-label">Caduca</label>
            <input class="form-control" type="date" id="caduca_el">
          </div>
        </div>

        <div class="mt-3">
          <button class="btn btn-success" type="submit">Guardar</button>
          <button class="btn btn-secondary" type="button" id="cancelar-edicion" style="display:none">Cancelar edición</button>
        </div>
      </form>
    </div>

    <!-- Listado (oculto hasta validar) -->
    <div id="resultados" class="results-section d-none">
      <h4>Documentos Guardados</h4>
      <select id="filtro-tipo" class="form-select my-2"></select>
      <div id="lista-documentos"></div>
    </div>
  </div>

  <script>
    // Mostrar app + resultados sólo con clave OK (usamos d-none)
    function verificarClave() {
      const ok = document.getElementById("clave").value === "1234";
      if (!ok) return alert("Contraseña incorrecta");
      document.getElementById("login").classList.add("d-none");
      document.getElementById("app").classList.remove("d-none");
      document.getElementById("resultados").classList.remove("d-none");
    }
  </script>

  <!-- Lógica principal -->
  <script type="module" src="/static/js/documentos.js"></script>
</body>
</html>
